System.register([],function(P,e){"use strict";return{execute:function(){var u=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r="undefined"!=typeof window&&/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent);function c(e){if(r||"undefined"==typeof MutationObserver)setTimeout(e);else{var t=0,n=new MutationObserver(function(){return e()}),i=document.createTextNode("");n.observe(i,{characterData:!0}),i.data=String(t=++t)}}var m=function(){function e(){}return e.parseDeep=function(e){var t=this.parse(e);return this.deepen(t)},e.stringifyDeep=function(e){var t=this.flatten(e);return this.stringify(t)},e.parse=function(e){for(var t={},n=("?"===e[0]?e.substr(1):e).split("&"),i=0;i<n.length;i++){var r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}return t},e.stringify=function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];t&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(i)}return t},e.deepen=function(e){var t={};for(var n in e){for(var i=t,r=n.split("."),o=r.pop();r.length;){var s=r.shift();i=i[s]=i[s]||{}}i[o]=e[n]}return t},e.flatten=function(e,t,n){for(var i in void 0===n&&(n={}),e){var r=e[i],o=t?t+"."+i:i;r&&"object"==typeof r?this.flatten(r,o,n):n[o]=r}return n},e}(),n=P("c",function(){function e(e,t){this.listeners=e,this.listener=t,this.unsubscribed=!1,this.otherSubscriptions=[]}return e.prototype.add=function(e){this.otherSubscriptions.push(e)},e.prototype.unsubscribe=function(){if(!this.unsubscribed){if(this.listener&&this.listeners){var e=this.listeners.indexOf(this.listener);e&&this.listeners.splice(e,1)}this.otherSubscriptions.forEach(function(e){return e.unsubscribe()}),this.unsubscribed=!0}},e}()),d=P("d",function(){function e(e){this.value=e,this.listeners=[],this.errorListeners=[]}return e.prototype.next=function(e){this.value=e;for(var t=0,n=this.listeners;t<n.length;t++){(0,n[t])(e)}},e.prototype.map=function(t){var n=new e(t(this.value));return this.subscribe(function(e){n.next(t(e))}),this.catch(function(e){n.error(e)}),n},e.prototype.catch=function(e){return this.errorListeners.push(e),new n(this.errorListeners,e)},e.prototype.error=function(e){for(var t=0,n=this.errorListeners;t<n.length;t++){(0,n[t])(e)}},e.prototype.subscribe=function(e,t){return this.listeners.push(e),t&&this.errorListeners.push(t),new n(this.listeners,e)},e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){var i=e.subscribe(function(e){t(e),i.unsubscribe()},function(e){n(e),i.unsubscribe()})})},e.prototype.promise=function(){return this.toPromise()},e}()),t="Pending",a="Fulfilled",l="Rejected";function h(e){return e&&"function"==typeof e}var e=function(){function s(e){this._state=t,this._handlers=[],this._value=null,e(this._resolve.bind(this),this._reject.bind(this))}return s.prototype._resolve=function(e){var t,n=this;if(e instanceof s)e.then(this._resolve.bind(this),this._reject.bind(this));else if((t=e)&&"object"==typeof t||h(e)){var i=!1;try{var r=e.then;h(r)?r.call(e,function(e){i||n._resolve(e),i=!0},function(e){i||n._reject(e),i=!0}):this._fulfill(e)}catch(e){i||this._reject(e)}}else this._fulfill(e)},s.prototype._fulfill=function(e){var t=this;this._state=a,this._value=e,this._handlers.forEach(function(e){return t._callHandler(e)})},s.prototype._reject=function(e){var t=this;this._state=l,this._value=e,this._handlers.forEach(function(e){return t._callHandler(e)})},s.prototype._isPending=function(){return this._state===t},s.prototype._isFulfilled=function(){return this._state===a},s.prototype._isRejected=function(){return this._state===l},s.prototype._addHandler=function(e,t){this._handlers.push({onFulfilled:e,onRejected:t})},s.prototype._callHandler=function(e){this._isFulfilled()&&h(e.onFulfilled)?e.onFulfilled(this._value):this._isRejected()&&h(e.onRejected)&&e.onRejected(this._value)},s.prototype.then=function(i,r){var o=this;switch(this._state){case t:return new s(function(t,n){o._addHandler(function(e){c(function(){try{h(i)?t(i(e)):t(e)}catch(e){n(e)}})},function(e){c(function(){try{h(r)?t(r(e)):n(e)}catch(e){n(e)}})})});case a:return new s(function(e,t){c(function(){try{h(i)?e(i(o._value)):e(o._value)}catch(e){t(e)}})});case l:return new s(function(e,t){c(function(){try{h(r)?e(r(o._value)):t(o._value)}catch(e){t(e)}})})}},s}(),i="undefined"!=typeof Promise?Promise:e;function p(t){return new i(function(e){return e(t)})}var o="undefined"==typeof window?require("node-fetch"):void 0!==window.fetch?window.fetch:function(r,o){return void 0===o&&(o={}),new i(function(e,t){var n=new XMLHttpRequest;if(n.open(o.method||"get",r,!0),o.headers)for(var i in o.headers)n.setRequestHeader(i,o.headers[i]);function u(){var r=[],o=[],s={},a=void 0;return n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){var i=t;return r.push(i=i.toLowerCase()),o.push([i,n]),a=s[i],s[i]=a?a+","+n:n,""}),{ok:2==(n.status/100|0),status:n.status,statusText:n.statusText,url:n.responseURL,clone:u,text:function(){return p(n.responseText)},json:function(){return p(n.responseText).then(JSON.parse)},blob:function(){return p(new Blob([n.response]))},headers:{keys:function(){return r},entries:function(){return o},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}}n.withCredentials="include"===o.credentials,n.onload=function(){e(u())},n.onerror=t,n.send(o.body)})};function w(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}return i}function f(n,i,r){var o,s,a;void 0===r&&(r={});var u=null,c=0,d=function(){c=!1===r.leading?0:Date.now(),u=null,a=n.apply(o,s),u||(o=s=null)};return function(){var e=Date.now();c||!1!==r.leading||(c=e);var t=i-(e-c);return o=this,s=arguments,t<=0||i<t?(u&&(clearTimeout(u),u=null),c=e,a=n.apply(o,s),u||(o=s=null)):u||!1===r.trailing||(u=setTimeout(d,t)),a}}var v=function(e){return e?e.replace(/([A-Z])/g,function(e){return"-"+e[0].toLowerCase()}):""},s=function(){function e(){}return e.prototype.bindAnimations=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];switch(i.trigger){case"pageLoad":this.triggerAnimation(i);break;case"hover":this.bindHoverAnimation(i);break;case"scrollInView":this.bindScrollInViewAnimation(i)}}},e.prototype.warnElementNotPresent=function(e){console.warn("Cannot animate element: element with ID "+e+" not found!")},e.prototype.augmentAnimation=function(e,t){for(var n=this.getAllStylesUsed(e),i=getComputedStyle(t),r=0,o=[e.steps[0].styles,e.steps[e.steps.length-1].styles];r<o.length;r++)for(var s=o[r],a=0,u=n;a<u.length;a++){var c=u[a];c in s||(s[c]=i[c])}},e.prototype.getAllStylesUsed=function(e){for(var t=[],n=0,i=e.steps;n<i.length;n++){var r=i[n];for(var o in r.styles)-1===t.indexOf(o)&&t.push(o)}return t},e.prototype.triggerAnimation=function(t){var n=this,e=Array.prototype.slice.call(document.getElementsByClassName(t.elementId||t.id||""));e.length?e.forEach(function(e){n.augmentAnimation(t,e);n.getAllStylesUsed(t);e.style.transition="none",e.style.transitionDelay="0",w(e.style,t.steps[0].styles),setTimeout(function(){e.style.transition="all "+t.duration+"s "+v(t.easing),t.delay&&(e.style.transitionDelay=t.delay+"s"),w(e.style,t.steps[1].styles),setTimeout(function(){e.style.transition="",e.style.transitionDelay=""},1e3*(t.delay||0)+1e3*t.duration+100)})}):this.warnElementNotPresent(t.elementId||t.id||"")},e.prototype.bindHoverAnimation=function(r){var o=this,e=Array.prototype.slice.call(document.getElementsByClassName(r.elementId||r.id||""));e.length?e.forEach(function(e){o.augmentAnimation(r,e);var t=r.steps[0].styles,n=r.steps[1].styles;function i(){w(e.style,t)}i(),e.addEventListener("mouseenter",function(){w(e.style,n)}),e.addEventListener("mouseleave",i),setTimeout(function(){e.style.transition="all "+r.duration+"s "+v(r.easing),r.delay&&(e.style.transitionDelay=r.delay+"s")})}):this.warnElementNotPresent(r.elementId||r.id||"")},e.prototype.bindScrollInViewAnimation=function(s){var n=this,e=Array.prototype.slice.call(document.getElementsByClassName(s.elementId||s.id||""));e.length?e.forEach(function(i){n.augmentAnimation(s,i);var r=!1;function e(){var e,t,n;!r&&(e=i.getBoundingClientRect(),t=window.innerHeight,n=.05*t,e.bottom>n&&e.top<t-n)&&(r=!0,w(i.style,s.steps[1].styles),document.removeEventListener("scroll",o),setTimeout(function(){i.style.transition="",i.style.transitionDelay=""},1e3*(1e3*s.duration+(s.delay||0))+100))}var o=f(e,200,{leading:!1});var t=s.steps[0].styles;w(i.style,t),setTimeout(function(){i.style.transition="all "+s.duration+"s "+v(s.easing),s.delay&&(i.style.transitionDelay=s.delay+"s")}),document.addEventListener("scroll",o,{capture:!0,passive:!0}),e()}):this.warnElementNotPresent(s.elementId||s.id||"")},e}(),g=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,y=function(){function e(e,t){this.request=e,this.response=t}return e.prototype.get=function(e){var t=this.request.headers.cookie;if(t){var n=t.match(new RegExp("(?:^|;) *"+e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")+"=([^;]*)"));if(n)return n[1]}},e.prototype.set=function(e,t,n){var i=this.response,r=this.request,o=i.getHeader("Set-Cookie")||[],s=void 0!==this.secure?!!this.secure:"https"===r.protocol||r.connection.encrypted,a=new b(e,t,n);if("string"==typeof o&&(o=[o]),!s&&n&&n.secure)throw new Error("Cannot send secure cookie over unencrypted connection");return a.secure=s,n&&"secure"in n&&(a.secure=!!n.secure),function(e,t){if(t.overwrite)for(var n=e.length-1;0<=n;n--)0===e[n].indexOf(t.name+"=")&&e.splice(n,1);e.push(t.toHeader())}(o,a),i.setHeader.call(i,"Set-Cookie",o),this},e}(),b=function(){function e(e,t,n){if(this.path="/",this.domain=void 0,this.httpOnly=!0,this.sameSite=!1,this.secure=!1,this.overwrite=!1,this.name="",this.value="",!g.test(e))throw new TypeError("argument name is invalid");if(t&&!g.test(t))throw new TypeError("argument value is invalid");t||(this.expires=new Date(0)),this.name=e,this.value=t||"",n.expires&&(this.expires=n.expires),n.secure&&(this.secure=n.secure)}return e.prototype.toString=function(){return this.name+"="+this.value},e.prototype.toHeader=function(){var e=this.toString();return this.maxAge&&(this.expires=new Date(Date.now()+this.maxAge)),this.path&&(e+="; path="+this.path),this.expires&&(e+="; expires="+this.expires.toUTCString()),this.domain&&(e+="; domain="+this.domain),this.sameSite&&(e+="; samesite="+(!0===this.sameSite?"strict":this.sameSite.toLowerCase())),this.secure&&(e+="; secure"),this.httpOnly&&(e+="; httponly"),e},e}();var C="function"==typeof require?require:function(){return null},k="object"==typeof window?{parse:function(e){var t=document.createElement("a");t.href=e;for(var n={},i="username password host hostname port protocol origin pathname search hash".split(" "),r=i.length;r--;)n[i[r]]=t[i[r]];return n.pathname&&"string"==typeof n.pathname&&0!==n.pathname.indexOf("/")&&(n.pathname="/"+n.pathname),n}}.parse:C("url").parse;function A(e){return Object.keys(e).length}function I(e,t){for(var n=e,i=n.length>>>0,r=t,o=0;o<i;o++){var s=n[o];if(t.call(r,s,o,n))return s}}var S="builderSessionId",O="undefined"!=typeof window,E=O&&window.top!==window.self,T=P("a",function(){function b(e,t,n,i){void 0===e&&(e=null),void 0===i&&(i=!1);var r=this;if(this.request=t,this.response=n,this.eventsQueue=[],this.throttledClearEventsQueue=f(function(){r.processEventsQueue()},100),this.env="production",this.isUsed=!1,this.sessionId=this.getSessionId(),this.targetContent=!0,this.cookies=null,this.cachebust=!1,this.noCache=!1,this.overrideHost="",this.preview=!1,this.canTrack$=new d(!this.browserTrackingDisabled),this.apiKey$=new d(null),this.editingMode$=new d(E),this.editingModel$=new d(null),this.userAgent="object"==typeof navigator&&navigator.userAgent||"",this.autoTrack=!!b.isBrowser&&!(this.isDevelopmentEnv||b.isBrowser&&-1!==location.search.indexOf("builder.preview=")),this.useNewContentApi=!1,this.blockContentLoading="",this.observersByKey={},this.overrides={},this.getContentQueue=null,this.priorContentQueue=null,this.testCookiePrefix="builder.tests",this.cookieQueue=[],b.isBrowser&&!i&&b.singletonInstance)return b.singletonInstance;this.request&&this.response&&(this.setUserAgent(this.request.headers["user-agent"]||""),this.cookies=new y(this.request,this.response)),e&&(this.apiKey=e),O&&this.bindMessageListeners(),E&&this.messageFrameLoaded(),this.canTrack$.subscribe(function(e){e&&("undefined"!=typeof sessionStorage&&(sessionStorage.getItem(S)||sessionStorage.setItem(S,r.sessionId)),r.eventsQueue.length&&r.throttledClearEventsQueue(),r.cookieQueue.length&&(r.cookieQueue.forEach(function(e){r.setCookie(e[0],e[1])}),r.cookieQueue.length=0))}),O&&(this.setTestsFromUrl(),this.getOverridesFromQueryString())}return b.registerAction=function(e){this.actions.push(e)},b.runAction=function(t){if(!("string"==typeof t?I(this.actions,function(e){return e.name===t}):t))throw new Error("Action not found: "+t)},b.fields=function(e,t){window.parent.postMessage({type:"builder.fields",data:{name:e,fields:t}},"*")},Object.defineProperty(b,"editingPage",{get:function(){return this._editingPage},set:function(e){this._editingPage=e,O&&E&&(e?document.body.classList.add("builder-editing-page"):document.body.classList.remove("builder-editing-page"))},enumerable:!0,configurable:!0}),b.prepareComponentSpecToSend=function(i){return u({},i,i.inputs&&{inputs:i.inputs.map(function(e){for(var t,n=0,i=["onChange","showIf"];n<i.length;n++){var r=i[n];if(e[r]&&"function"==typeof e[r]){var o=e[r];e=u({},e,((t={})[r]="return ("+o.toString()+").apply(this, arguments)",t))}}return e})},{hooks:Object.keys(i.hooks||{}).reduce(function(e,t){var n=i.hooks&&i.hooks[t];return n&&(e[t]="string"==typeof n?n:"return ("+n.toString()+").apply(this, arguments)"),e},{}),class:void 0})},b.component=function(i){var r=this;return void 0===i&&(i={}),function(e){var t=u({},i,{class:e});if(t.name||(t.name=e.name),!I(r.components,function(e){return e.name===t.name})){r.components.push(t);var n=r.prepareComponentSpecToSend(t);O&&window.parent.postMessage({type:"builder.registerComponent",data:n},"*")}return e}},Object.defineProperty(b,"Component",{get:function(){return this.component},enumerable:!0,configurable:!0}),b.prototype.processEventsQueue=function(){if(this.eventsQueue.length){var e=this.eventsQueue;this.eventsQueue=[];var t=this.host;o(t+"/api/v1/track",{method:"POST",body:JSON.stringify({events:e}),headers:{"content-type":"application/json"},mode:"cors"})}},Object.defineProperty(b.prototype,"browserTrackingDisabled",{get:function(){return b.isBrowser&&"1"===navigator.doNotTrack},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"canTrack",{get:function(){return this.canTrack$.value&&!this.browserTrackingDisabled},set:function(e){this.canTrack!==e&&this.canTrack$.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"editingMode",{get:function(){return this.editingMode$.value},set:function(e){e!==this.editingMode&&this.editingMode$.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"editingModel",{get:function(){return this.editingModel$.value},set:function(e){e!==this.editingModel&&this.editingModel$.next(e)},enumerable:!0,configurable:!0}),b.prototype.findParentElement=function(e,t,n){if(void 0===n&&(n=!0),!(e instanceof HTMLElement))return null;var i=n?e:e.parentElement;do{if(!i)return null;if(t(i))return i}while(i=i.parentElement);return null},b.prototype.findBuilderParent=function(e){return this.findParentElement(e,function(e){var t=e.getAttribute("builder-id")||e.id;return Boolean(t&&0===t.indexOf("builder-"))})},b.prototype.setUserAgent=function(e){this.userAgent=e||""},b.prototype.track=function(e,t){void 0===t&&(t={}),!E&&O&&(this.eventsQueue.push({type:"impression",data:u({metadata:{sdkVersion:b.VERSION,url:location.href}},t,{userAttributes:this.getUserAttributes(),sessionId:this.sessionId})}),this.canTrack&&this.throttledClearEventsQueue())},b.prototype.getSessionId=function(){var e=this,t=b.isBrowser&&"undefined"!=typeof sessionStorage&&sessionStorage.getItem(S)||"";return t||(t=(Date.now()+Math.random()).toString(36)),b.isBrowser&&setTimeout(function(){e.canTrack&&"undefined"!=typeof sessionStorage&&sessionStorage.setItem(S,t)}),t},b.prototype.trackImpression=function(e,t){!E&&O&&(this.eventsQueue.push({type:"impression",data:{contentId:e,variationId:t!==e?t:void 0,ownerId:this.apiKey,userAttributes:this.getUserAttributes(),sessionId:this.sessionId}}),this.throttledClearEventsQueue())},b.prototype.trackConversion=function(e){!E&&O&&(this.eventsQueue.push({type:"conversion",data:{amount:e,ownerId:this.apiKey,userAttributes:this.getUserAttributes(),sessionId:this.sessionId}}),this.throttledClearEventsQueue())},Object.defineProperty(b.prototype,"isDevelopmentEnv",{get:function(){return b.isIframe||b.isBrowser&&("localhost"===location.hostname||""!==location.port)||"production"!==this.env},enumerable:!0,configurable:!0}),b.prototype.trackInteraction=function(e,t,n,i){if(void 0===n&&(n=!1),!E&&O){var r=i&&i.target,o=r&&this.findBuilderParent(r),s={};if(i){var a=i.clientX,u=i.clientY;if(r){var c=a-(p=r.getBoundingClientRect()).left,d=u-p.top,l=v(c/p.width),h=v(d/p.height);s.targetOffset={x:l,y:h}}if(o){var p;c=a-(p=o.getBoundingClientRect()).left,d=u-p.top,l=v(c/p.width),h=v(d/p.height);s.builderTargetOffset={x:l,y:h}}}var f=o&&(o.getAttribute("builder-id")||o.id);f&&o&&(s.builderElementIndex=[].slice.call(document.getElementsByClassName(f)).indexOf(o)),this.eventsQueue.push({type:"click",data:{contentId:e,metadata:s,variationId:t!==e?t:void 0,ownerId:this.apiKey,unique:!n,targetBuilderElement:f||void 0,userAttributes:this.getUserAttributes(),sessionId:this.sessionId}}),this.throttledClearEventsQueue()}function v(e){return Math.round(1e3*e)/1e3}},b.prototype.component=function(e){return void 0===e&&(e={}),b.component(e)},Object.defineProperty(b.prototype,"apiKey",{get:function(){return this.apiKey$.value},set:function(e){this.apiKey$.next(e)},enumerable:!0,configurable:!0}),b.prototype.modifySearch=function(e){return e.replace(/(^|&|\?)(builder_.*?)=/gi,function(e,t,n){return t+n.replace(/_/g,".")+"="})},b.prototype.setTestsFromUrl=function(){var e=this.getLocation().search,t=m.parseDeep(this.modifySearch(e||"").substr(1)),n=t.builder&&t.builder.tests;if(n&&"object"==typeof n)for(var i in n)n.hasOwnProperty(i)&&this.setTestCookie(i,n[i])},b.prototype.resetOverrides=function(){b.overrideUserAttributes={},this.cachebust=!1,this.noCache=!1,this.preview=!1,this.overrideHost="",this.editingModel=null,this.overrides={},this.env="production",this.userAgent="",this.request=void 0,this.response=void 0},b.prototype.getOverridesFromQueryString=function(){var e=this.getLocation(),t=m.parseDeep(this.modifySearch(e.search||"").substr(1)).builder;if(t){var n=t.userAttributes,i=t.overrides,r=t.env,o=t.host,s=t.api,a=t.cachebust,u=t.noCache,c=t.preview,d=t.editing;n&&this.setUserAttributes(n),i&&(this.overrides=i),(r||s)&&(this.env=r||s),d&&(this.editingModel=d),o&&(this.overrideHost=o),a&&(this.cachebust=!0),u&&(this.noCache=!0),c&&(this.preview=!0)}},b.prototype.messageFrameLoaded=function(){window.parent.postMessage({type:"builder.loaded",data:{value:!0}},"*")},b.prototype.bindMessageListeners=function(){var m=this;O&&addEventListener("message",function(e){var t=k(e.origin);if(-1!==["builder.io","localhost","local.builder.io","qa.builder.io"].indexOf(t.hostname)){var n=e.data;if(n)switch(n.type){case"builder.ping":window.parent.postMessage({type:"builder.pong",data:{}},"*");break;case"builder.triggerAnimation":b.animator.triggerAnimation(n.data);break;case"builder.contentUpdate":var i=n.data.key||n.data.alias||n.data.entry||n.data.modelName,r=n.data.data,o=m.observersByKey[i];o&&o.next([r]);break;case"builder.getComponents":window.parent.postMessage({type:"builder.components",data:b.components.map(function(e){return b.prepareComponentSpecToSend(e)})},"*");break;case"builder.editingModel":m.editingModel=n.data.model;break;case"builder.registerComponent":var s=n.data;b.components.push(s);break;case"builder.blockContentLoading":"string"==typeof n.data.model&&(m.blockContentLoading=n.data.model);break;case"builder.editingMode":n.data?(m.editingMode=!0,document.body.classList.add("builder-editing")):(m.editingMode=!1,document.body.classList.remove("builder-editing"));break;case"builder.editingPageMode":var a=n.data;b.editingPage=a;break;case"builder.overrideUserAttributes":var u=n.data;w(b.overrideUserAttributes,u),m.flushGetContentQueue(!0);break;case"builder.overrideTestGroup":var c=n.data,d=c.variationId,l=c.contentId;d&&l&&(m.setTestCookie(l,d),m.flushGetContentQueue(!0));break;case"builder.evaluate":var h=n.data.text,p=n.data.arguments||[],f=n.data.id,v=new Function(h),g=void 0,y=null;try{g=v.apply(m,p)}catch(e){y=e}y?window.parent.postMessage({type:"builder.evaluateError",data:{id:f,error:y.message}},"*"):g&&"function"==typeof g.then?g.then(function(e){window.parent.postMessage({type:"builder.evaluateResult",data:{id:f,result:e}},"*")}).catch(console.error):window.parent.postMessage({type:"builder.evaluateResult",data:{result:g,id:f}},"*")}}})},b.prototype.init=function(e,t,n,i){return void 0===t&&(t=!0),n&&(this.request=n),i&&(this.response=i),this.canTrack=t,this.apiKey=e,this},b.prototype.getLocation=function(){return this.request?k(this.request.url):"object"==typeof location&&k(location.href)||{}},b.prototype.getUserAttributes=function(e){void 0===e&&(e=this.userAgent||""),this.isUsed=!0;var t={Android:function(){return e.match(/Android/i)},BlackBerry:function(){return e.match(/BlackBerry/i)},iOS:function(){return e.match(/iPhone|iPad|iPod/i)},Opera:function(){return e.match(/Opera Mini/i)},Windows:function(){return e.match(/IEMobile/i)||e.match(/WPDesktop/i)},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Opera()||t.Windows()}},n=this.getLocation();return u({urlPath:n.pathname,host:n.host||n.hostname,device:t.any()?"mobile":"desktop"},b.overrideUserAttributes)},b.prototype.setUserAttributes=function(e){w(b.overrideUserAttributes,e)},b.prototype.get=function(e,t){void 0===t&&(t={});var n=this;return b.isBrowser||!t.req&&!t.res?t.apiKey&&!this.apiKey&&(this.apiKey=t.apiKey):n=new b(t.apiKey||this.apiKey,t.req,t.res),n.queueGetContent(e,t).map(function(e){var t=e&&e[0],n=t&&t.data;return n?{data:n,id:t.id,variationId:t.testVariationId||t.variationId,testVariationId:t.testVariationId||t.variationId,testVariationName:t.testVariationName}:null})},b.prototype.queueGetContent=function(e,t){var n=this;void 0===t&&(t={});var i=t.key||t.alias||e,r=this.editingModel===e,o=this.observersByKey[i];"DEMO"!==this.apiKey||this.overrides[i]||t.initialContent||(t.initialContent=[]);var s=t.initialContent;if(o&&(!o.value||t.cache))return o.value&&c(function(){o.next(o.value)}),o;r&&b.isBrowser&&parent.postMessage({type:"builder.updateContent"},"*"),s||(this.getContentQueue||(this.getContentQueue=[]),this.getContentQueue.push(u({},t,{model:e,key:i})),this.getContentQueue&&5<=this.getContentQueue.length?this.flushGetContentQueue():c(function(){n.flushGetContentQueue()}));var a=new d(null);return this.observersByKey[i]=a,s&&c(function(){a.next(s)}),a},b.prototype.requestUrl=function(e){return b.isBrowser?o(e).then(function(e){return e.json()}):new Promise(function(n,t){(0===e.indexOf("http:")?C("http"):C("https")).get(e,function(e){var t="";e.on("data",function(e){t+=e}),e.on("end",function(){n(JSON.parse(t))})}).on("error",function(e){t(e)})})},Object.defineProperty(b.prototype,"host",{get:function(){if(this.overrideHost)return this.overrideHost;switch(this.env){case"qa":return"https://qa.builder.io";case"development":case"dev":return"http://localhost:5000";default:return"https://cdn.builder.io"}},enumerable:!0,configurable:!0}),b.prototype.flushGetContentQueue=function(e,t){var c=this;if(void 0===e&&(e=!1),!this.apiKey)throw new Error("Builder needs to be initialized with an API key!");if(e||this.getContentQueue){var d=t||(e?this.priorContentQueue:this.getContentQueue)||[];this.getOverridesFromQueryString();var n={},i="undefined"!=typeof location?m.parseDeep(location.search.substr(1)):{},r=d&&d[0].userAttributes?d[0].userAttributes:this.targetContent?this.getUserAttributes():{urlPath:this.getLocation().pathname};if(n.userAttributes=b.useNewApi?r:JSON.stringify(r),e||t||(this.priorContentQueue=d,this.getContentQueue=null),(this.cachebust||E||i.cachebust||i["builder.cachebust"]||"production"!==this.env)&&(n.cachebust=!0,n.cachebuster=Date.now()),(this.noCache||"production"!==this.env)&&(n.noCache=!0),A(this.overrides))for(var o in this.overrides)this.overrides.hasOwnProperty(o)&&(n["overrides."+o]=this.overrides[o]);if(b.useNewApi&&!b.isReact&&(n.prerender=!0),b.useNewApi)for(var s=0,a=d;s<a.length;s++){var u=a[s];u.format&&(n.format=u.format);for(var l=0,h=["prerender","extractCss","limit","offset","query","preview","model","entry"];l<h.length;l++){var p=u[o=h[l]];void 0!==p&&(n.options=n.options||{},n.options[u.key]=n.options[u.key]||{},n.options[u.key][o]=JSON.stringify(p))}}this.preview&&(n.preview="true");var f=0<Object.keys(n).length,v=this.useNewContentApi?"https://lambda.builder.codes":this.host,g=d.map(function(e){return encodeURIComponent(e.key)}).join(","),y=b.useNewApi?m.stringifyDeep(n):m.stringify(n);return this.requestUrl(v+"/api/v1/"+(b.useNewApi?"query":"content")+"/"+this.apiKey+"/"+g+(n&&f?"?"+y:"")).then(function(e){c.getLocation();for(var t=0,n=d;t<n.length;t++){var i=n[t],r=i.key;if(i.model!==c.blockContentLoading){if(c.editingModel===i.model)return void parent.postMessage({type:"builder.updateContent"},"*");var o=c.observersByKey[r];if(!o)return;var s=e[r],a=s;if(s){var u=c.processResultsForTests(a);o.next(u)}else{if(c.getLocation().search.includes("builder.preview="+i.model)){o.next([{id:"preview",name:"Preview",data:{}}])}o.next([])}}}},function(e){for(var t=0,n=d;t<n.length;t++){var i=n[t],r=c.observersByKey[i.key];if(!r)return;r.error(e)}})}},b.prototype.processResultsForTests=function(e){var a=this,t=e.map(function(e){if(!e.variations)return e;var t=a.getTestCookie(e.id),n=t===e.id?e:e.variations[t];if(n)return u({},e,{data:n.data,variationId:t,testVariationId:t,testVariationName:n.name});if(e.variations&&A(e.variations)){var i=0,r=Math.random();for(var o in e.variations){var s=e.variations[o];if(r<(i+=s.testRatio))return a.setTestCookie(e.id,s.id),u({},e,{data:s.data,variationId:s.id,testVariationId:s.id,testVariationName:s.name})}a.setTestCookie(e.id,e.id)}return u({},e,{variationId:e.id},e.variations&&A(e.variations)&&{testVariationId:e.id,testVariationName:"default"})});return E&&window.parent.postMessage({type:"builder.contentResults",data:{results:t}},"*"),t},b.prototype.getTestCookie=function(e){return this.getCookie(this.testCookiePrefix+"."+e)},b.prototype.setTestCookie=function(e,t){if(this.canTrack){var n=new Date;return n.setDate(n.getDate()+30),this.setCookie(this.testCookiePrefix+"."+e,t,n)}this.cookieQueue.push([e,t])},b.prototype.getCookie=function(e){return this.cookies?this.cookies.get(e):b.isBrowser&&(t=e,decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null);var t},b.prototype.setCookie=function(e,t,n){return this.cookies?this.cookies.set(e,t,{expires:n,secure:"https:"===this.getLocation().protocol}):b.isBrowser&&function(e,t,n){var i="";n&&(i="; expires="+n.toUTCString());var r=!O||"https:"===location.protocol;document.cookie=e+"="+(t||"")+i+"; path=/"+(r?";secure":"")}(e,t,n)},b.prototype.getContent=function(e,t){if(void 0===t&&(t={}),!this.apiKey)throw new Error("Builder needs to be initialized with an API key!");return this.queueGetContent(e)},b.components=[],b.nextTick=c,b.VERSION="1.0.30-alpha.1",b.useNewApi=!0,b.animator=new s,b.actions=[],b._editingPage=!1,b.isIframe=E,b.isBrowser=O,b.isEditing=Boolean(E&&document.referrer.match(/builder\.io|localhost:1234/)),b.isReact=!1,b.overrideUserAttributes={},b}()),x=P("b",new T(null,void 0,void 0,!0));T.singletonInstance=x}}});
//# sourceMappingURL=chunk-82b7d41d.js.map
